{"version":3,"sources":["../../src/test/testApi.js"],"names":["users","events","centers","notifications","server","expect","app","expressServer","use","adminUser","regularUser","signedInUser","eventCenter","event","process","env","NODE_ENV","console","log","describe","before","sync","force","then","catch","error","it","request","get","res","body","to","be","an","post","set","field","attach","Object","assign","have","status","send","username","password","token","userType","userId","updateCenter","centerName","location","cost","sits","facilities","put","id","updateEvent","eventType","centerId","notification","message"],"mappings":"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","file":"testApi.js","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport Server from './../app';\r\nimport models from './../models/index';\r\n\r\nconst {\r\n  users,\r\n  events,\r\n  centers,\r\n  notifications,\r\n} = models;\r\nconst server = new Server();\r\nconst { expect } = chai;\r\nconst app = server.expressServer();\r\nchai.use(chaiHttp);\r\n\r\nconst adminUser = {};\r\nconst regularUser = {};\r\nconst signedInUser = {};\r\nconst eventCenter = {};\r\nconst event = {};\r\n// get env variable\r\nif (process.env.NODE_ENV !== 'test') {\r\n  /* eslint-disable no-console */\r\n  console.log(`can't run test in non test env. you are in ${process.env.NODE_ENV} environment`);\r\n} else {\r\n  describe('API routes', () => {\r\n    before('clear database', () => {\r\n      return centers.sync({ force: true })\r\n        .then(() => {\r\n          return notifications.sync({ force: true });\r\n        })\r\n        .then(() => {\r\n          return users.sync({ force: true });\r\n        })\r\n        .then(() => {\r\n          return events.sync({ force: true });\r\n        })\r\n        .catch((error) => {\r\n          throw error;\r\n        });\r\n    });\r\n\r\n    // test default route\r\n    describe('Home', () => {\r\n      it('should return welcome message', () => {\r\n        return chai.request(app)\r\n          .get('/')\r\n          .then((res) => {\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n    });\r\n\r\n    describe('Admin User', () => {\r\n      it('should create new admin user', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signup')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('fullname', 'tutu godfrey')\r\n          .field('username', 'tutug')\r\n          .field('email', 'meandyou@yahoo.com')\r\n          .field('gender', 'male')\r\n          .field('passwd1', '12345')\r\n          .field('passwd2', '12345')\r\n          .field('userType', 'admin')\r\n          .field('securityQtn', 'what isthe name of your best teacher?')\r\n          .field('securityAns', 'westle')\r\n        // .send(user)\r\n          .attach('userPix', './filestoupload/wp_ss_20150407_0001.png')\r\n          .then((res) => {\r\n            Object.assign(adminUser, res.body);\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should not create already existing user', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signup')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('fullname', 'tutu godfrey')\r\n          .field('username', 'tutug')\r\n          .field('email', 'meandyou@yahoo.com')\r\n          .field('gender', 'male')\r\n          .field('passwd1', '12345')\r\n          .field('passwd2', '12345')\r\n          .field('userType', 'admin')\r\n          .field('securityQtn', 'what isthe name of your best teacher?')\r\n          .field('securityAns', 'westle')\r\n        // .send(user)\r\n          .attach('userPix', './filestoupload/wp_ss_20150407_0001.png')\r\n          .then((res) => {\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should not create user if password does not match', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signup')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('fullname', 'tutu godfrey')\r\n          .field('username', 'tutu')\r\n          .field('email', 'mendyou@yahoo.com')\r\n          .field('gender', 'male')\r\n          .field('passwd1', '12345')\r\n          .field('passwd2', '12346')\r\n          .field('userType', 'admin')\r\n          .field('securityQtn', 'what isthe name of your best teacher?')\r\n          .field('securityAns', 'westle')\r\n        // .send(user)\r\n          .attach('userPix', './filestoupload/wp_ss_20150407_0001.png')\r\n          .then((res) => {\r\n            expect(res).to.have.status(400);\r\n            expect(res.body).to.be.an('Object');\r\n          })\r\n          .catch((res) => {\r\n            expect(res).to.have.status(400);\r\n          });\r\n      });\r\n\r\n      it('should not create user if a required field is not present', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signup')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('fullname', 'tutu godfrey')\r\n          .field('username', 'tutu')\r\n          .field('email', 'mendyou@yahoo.com')\r\n          .field('gender', 'male')\r\n          .field('passwd1', '12345')\r\n          .field('passwd2', '12345')\r\n          .field('userType', 'admin')\r\n          .field('securityQtn', 'what isthe name of your best teacher?')\r\n        // .send(user)\r\n          .attach('userPix', './filestoupload/wp_ss_20150407_0001.png')\r\n          .then((res) => {\r\n            expect(res).to.have.status(400);\r\n            //  expect(res.body).to.be.an('Object');\r\n          })\r\n          .catch((res) => {\r\n            expect(res).to.have.status(400);\r\n            // expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should signin a adminUser in and give a token', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signin')\r\n          .send({\r\n            username: adminUser.username,\r\n            password: '12345',\r\n          })\r\n          .then((res) => {\r\n            Object.assign(signedInUser, res.body);\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should not signin a user if password is not correct', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signin')\r\n          .send({\r\n            username: adminUser.username,\r\n            password: '1345',\r\n          })\r\n          .then((res) => {\r\n            expect(res).to.have.status(400);\r\n            expect(res.body).to.be.an('Object');\r\n          })\r\n          .catch((res) => {\r\n            expect(res).to.have.status(400);\r\n          });\r\n      });\r\n\r\n      it('should not singin in username is not found', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signin')\r\n          .send({\r\n            username: 'wronguser',\r\n            password: '12345',\r\n          })\r\n          .then((res) => {\r\n            expect(res).to.have.status(400);\r\n            expect(res.body).to.be.an('Object');\r\n          })\r\n          .catch((res) => {\r\n            expect(res).to.have.status(400);\r\n          });\r\n      });\r\n      /*\r\n      it('should fail if token is not sent', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/secure')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('userType', signedInUser.userType)\r\n          .field('centerName', 'gard park')\r\n          .field('location', 'Abuja')\r\n          .field('cost', 240)\r\n          .field('sits', 500)\r\n          .field('facilities', 'Air condition')\r\n          .field('userId', signedInUser.userId)\r\n          .field('facilities', 'projector')\r\n          .attach('centerPix', './filestoupload/wp_ss_20150309_0001.png')\r\n          .then((res) => {\r\n            expect(res).to.have.status(402);\r\n          })\r\n          .catch(res => expect(res).to.have.status(402));\r\n      });\r\n\r\n      it('should fail if token is invalid', () => {\r\n        const { token } = signedInUser;\r\n        const invalidToken = token.substring(0, token.length - 2);\r\n        return chai.request(app)\r\n          .post('/api/v1/secure')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .set('token', invalidToken)\r\n          .field('userType', signedInUser.userType)\r\n          .field('centerName', 'gard park')\r\n          .field('location', 'Abuja')\r\n          .field('cost', 240)\r\n          .field('sits', 500)\r\n          .field('facilities', 'Air condition')\r\n          .field('userId', signedInUser.userId)\r\n          .field('facilities', 'projector')\r\n          .attach('centerPix', './filestoupload/wp_ss_20150309_0001.png')\r\n          .then((res) => {\r\n            expect(res).to.have.status(401);\r\n          })\r\n          .catch(res => expect(res).to.have.status(401));\r\n      });\r\n      */\r\n      it('should create event Center', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/secure/centers')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .set('token', signedInUser.token)\r\n          .field('userType', signedInUser.userType)\r\n          .field('centerName', 'gard park')\r\n          .field('location', 'Abuja')\r\n          .field('cost', 240)\r\n          .field('sits', 500)\r\n          .field('facilities', 'Air condition')\r\n          .field('userId', signedInUser.userId)\r\n          .field('facilities', 'projector')\r\n          .attach('centerPix', './filestoupload/wp_ss_20150309_0001.png')\r\n          .then((res) => {\r\n            Object.assign(eventCenter, res.body);\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('object');\r\n          });\r\n      });\r\n\r\n      it('should update an event Center', () => {\r\n        const updateCenter = {\r\n          userType: signedInUser.userType,\r\n          centerName: 'gard park',\r\n          location: 'Abuja',\r\n          cost: 120,\r\n          sits: 520,\r\n          facilities: ['Air condition', 'Catering'],\r\n          userId: signedInUser.userId,\r\n        };\r\n        return chai.request(app)\r\n          .put(`/api/v1/secure/centers/${eventCenter.id}`)\r\n          .set('token', signedInUser.token)\r\n          .send(updateCenter)\r\n          .then((res) => {\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('object');\r\n          });\r\n      });\r\n    }); // end admin section\r\n    describe('regular Users', () => {\r\n      it('should create new regular user', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signup')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .field('fullname', 'tut godfrey')\r\n          .field('username', 'gtutu')\r\n          .field('email', 'allofus@yahoo.com')\r\n          .field('gender', 'male')\r\n          .field('passwd1', '12345')\r\n          .field('passwd2', '12345')\r\n          .field('userType', 'regular')\r\n          .field('securityQtn', 'what isthe name of your best teacher?')\r\n          .field('securityAns', 'westle')\r\n          .attach('userPix', './filestoupload/wp_ss_20140715_0001.png')\r\n          .then((res) => {\r\n            Object.assign(regularUser, res.body);\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should signin a regularUser in and give a token', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signin')\r\n          .send({\r\n            username: 'gtutu',\r\n            password: '12345',\r\n          })\r\n          .then((res) => {\r\n            Object.assign(signedInUser, res.body);\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('should create event', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/secure/events')\r\n          .set('Content-Type', 'multipart/form-data')\r\n          .set('token', signedInUser.token)\r\n          .field('eventType', 'wedding')\r\n          .field('eventDate', '2018-02-10')\r\n          .field('facilities', eventCenter.facilities[0])\r\n          .field('facilities', eventCenter.facilities[1])\r\n          .field('centerId', eventCenter.id)\r\n          .field('userId', signedInUser.userId)\r\n          .attach('eventPix', './filestoupload/wp_ss_20150922_0001.png')\r\n          .then((res) => {\r\n            Object.assign(event, res.body);\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('object');\r\n          });\r\n      });\r\n\r\n      it('should update an event', () => {\r\n        const updateEvent = {\r\n          eventType: 'wedding anniversar',\r\n          centerId: event.centerId,\r\n          userId: signedInUser.userId,\r\n        };\r\n        return chai.request(app)\r\n          .put(`/api/v1/secure/events/${event.id}`)\r\n          .set('token', signedInUser.token)\r\n          .send(updateEvent)\r\n          .then((res) => {\r\n            expect(res).to.have.status(201);\r\n            expect(res.body).to.be.an('object');\r\n          });\r\n      });\r\n    }); // end reuglar user\r\n    describe('Notifications', () => {\r\n      it('should signin a adminUser in and get a token', () => {\r\n        return chai.request(app)\r\n          .post('/api/v1/users/signin')\r\n          .send({\r\n            username: adminUser.username,\r\n            password: '12345',\r\n          })\r\n          .then((res) => {\r\n            Object.assign(signedInUser, res.body);\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('Object');\r\n          });\r\n      });\r\n\r\n      it('Create new notification', () => {\r\n        const notification = {\r\n          message: 'your events is cancelled',\r\n          userType: signedInUser.userType,\r\n          userId: regularUser.id,\r\n        };\r\n        return chai.request(app)\r\n          .post('/api/v1/secure/notifications')\r\n          .set('token', signedInUser.token)\r\n          .send(notification)\r\n          .then((res) => {\r\n            expect(res).to.have.status(201);\r\n          });\r\n      });\r\n\r\n      it('Get notification', () => {\r\n        return chai.request(app)\r\n          .get(`/api/v1/secure/notifications/${regularUser.id}`)\r\n          .set('token', signedInUser.token)\r\n          .then((res) => {\r\n            expect(res).to.have.status(200);\r\n          });\r\n      });\r\n    }); // end notification\r\n  });\r\n}\r\n"]}